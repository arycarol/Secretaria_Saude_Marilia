<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Administrativo - Controle de Frotas</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./frota.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>

<body>
    <div id="app" class="app-container">
        <div 
            :class="{ 'sidebar': true, 'active': isSidebarActive }"
            @mouseover="isSidebarActive = true"
            @mouseleave="isSidebarActive = false"
        >
            
            <div class="logo">
                <img src="./img/logomenu.png" alt="Logo C+M" class="logo-image">
            </div>

            <div class="search-box">
                <img src="./img/search.png" alt="Buscar" class="search-icon">
                <input type="text" placeholder="Buscar" v-model="searchQuery">
            </div>

            <p class="section-title">Funcionalidades</p>
            <div class="menu">
                <a href="#">
                    <i class="fas fa-users"></i>
                    <span>Gerenciamento de Usuários</span>
                </a>
                <a href="#">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Liberação de Transporte e Agendamento</span>
                </a>
                
                <a href="#" class="active menu-item-with-arrow">
                    <i class="fas fa-truck"></i>
                    <span>Controle de Frotas</span>
                    <img src="./img/seta.png" alt="Seta" class="arrow-icon">
                </a>
                <a href="#">
                    <i class="fas fa-user-circle"></i>
                    <span>Meu Perfil</span>
                </a>
            </div>
        </div>

        <button 
            :class="{ 'menu-toggle': true, 'active': isSidebarActive }"
            @mouseover="isSidebarActive = true"
            @mouseleave="isSidebarActive = false">
            <i :class="isSidebarActive ? 'fas fa-chevron-left' : 'fas fa-bars'"></i>
        </button>

        <div :class="{ 'main-content': true, 'shifted': isSidebarActive }">
            <div class="main-header">
                <div class="title-area">
                    <img src="./img/car.png" alt="Ícone de Carro" class="vehicle-icon-img">
                    
                    <h1>Painel Administrativo: <span class="title-highlight">Controle de Frotas</span></h1>
                </div>
                <div class="user-profile">
                    <a href="/login" class="action-icon">
                        <img src="./img/back.png" alt="Sair" class="icon-back">
                    </a>
                    <a href="/profile" class="action-icon">
                        <img src="./img/profile.png" alt="Meu Perfil" class="icon-profile">
                    </a>
                </div>
            </div>

            <div class="segmented-control">
                <button :class="{ 'tab-button': true, 'active': activeTab === 'emFunc' }"
                    @click="activeTab = 'emFunc'">Em funcionamento</button>
                <button :class="{ 'tab-button': true, 'active': activeTab === 'manut' }"
                    @click="activeTab = 'manut'">Quebr/Manutenção</button>
            </div>

            <div class="control-row-outside">
                <button class="add-button" @click="addVehicle">+</button>
                
                <div class="search-input-group-outside">
                    <img src="./img/search.png" alt="Pesquisar" class="search-icon-outside">
                    <input type="text" placeholder="Pesquisar" v-model="searchQuery">
                </div>
            </div>
            
            <div class="fleet-control-panel">
                <div class="table-header-row">
                    <span class="header-col status-col">Status</span> <span class="header-col placa-col">Placa</span>
                    <span class="header-col renavam-col">Renavam</span>
                    <span class="header-col ano-col">Ano</span>
                    <span class="header-col modelo-col">Modelo</span>
                    <span class="header-col cor-col">Cor</span>
                    <span class="header-col combustivel-col">Combustível</span>
                    <span class="header-col capacidade-col">Capacidade</span>
                    <span class="header-col actions-col">...</span>
                </div>

                <div class="table-body">
                    <div v-if="filteredVehicles.length === 0" class="no-records">
                        Nenhum registro encontrado.
                    </div>
                    <div v-else v-for="vehicle in filteredVehicles" :key="vehicle.placa" class="table-row">
                        <div class="col status-col"><span class="status-dot-inline" :class="statusClass(vehicle.status)"></span></div>
                        
                        <div class="col placa-col">{{ vehicle.placa }}</div>
                        <div class="col renavam-col">{{ vehicle.renavam }}</div>
                        <div class="col ano-col">{{ vehicle.ano }}</div>
                        <div class="col modelo-col">{{ vehicle.modelo }}</div>
                        <div class="col cor-col">{{ vehicle.cor }}</div>
                        <div class="col combustivel-col">{{ vehicle.combustivel }}</div>
                        <div class="col capacidade-col">{{ vehicle.capacidade }}</div>
                        <div class="col actions-col">...</div>
                    </div>
                </div>
            </div>
            
            <p class="record-count-outside">{{ filteredVehicles.length }} Registros</p>

            <div class="status-legend">
                <span class="legend-item"><span class="status-dot status-em-func"></span> Em funcionamento</span>
                <span class="legend-item"><span class="status-dot status-quebrado"></span> Quebrado</span>
                <span class="legend-item"><span class="status-dot status-manut"></span> Manutenção</span>
                <span class="legend-item"><span class="status-dot status-em-uso"></span> Em uso</span>
            </div>
        </div>
    </div>

    <script src="./frota.js"></script> 
</body>

</html>